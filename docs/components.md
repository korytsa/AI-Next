# Документация компонентов

## Компоненты чата

### ChatPage
**Расположение:** `app/chat/page.tsx`

Главная страница чата, объединяет все компоненты и хуки.

**Основные функции:**
- Управление состоянием чата через `useChat`
- Рендеринг ChatHeader, MessagesList, ChatInput
- Обработка всех действий пользователя

### ChatHeader
**Расположение:** `app/chat/components/ChatHeader.tsx`

Шапка чата с настройками и управлением.

**Props:**
- `useStreaming` - режим streaming
- `onToggleStreaming` - переключение streaming
- `loading` - состояние загрузки
- `onClearHistory` - очистка истории
- `userName` - имя пользователя
- `onEditName` - редактирование имени
- `responseMode` - режим ответа
- `onSetResponseMode` - установка режима
- `onExportDialog` - открытие диалога экспорта
- `totalTokens` - общее количество токенов
- `chainOfThought` - режим Chain of Thought
- `onSetChainOfThought` - установка CoT
- `selectedModel` - выбранная модель
- `onSetSelectedModel` - выбор модели
- `autoPlayVoice` - автовоспроизведение голоса
- `onToggleAutoPlayVoice` - переключение автовоспроизведения
- `searchQuery` - поисковый запрос
- `onSetSearchQuery` - установка запроса

**Функции:**
- Отображение настроек
- Управление параметрами чата
- Поиск по истории
- Экспорт истории

### MessagesList
**Расположение:** `app/chat/components/MessagesList.tsx`

Список сообщений с поддержкой пагинации.

**Props:**
- `messages` - массив сообщений
- `messagesEndRef` - ref для скролла в конец
- `messagesStartRef` - ref для скролла в начало
- `loading` - состояние загрузки
- `onRetry` - повторная отправка
- `autoPlayVoice` - автовоспроизведение
- `isLoadingMore` - загрузка старых сообщений
- `hasMoreMessages` - есть ли еще сообщения
- `loadMoreMessages` - загрузка старых сообщений

**Функции:**
- Отображение списка сообщений
- Пагинация для загрузки старых сообщений
- Автоскролл к новым сообщениям

### MessageBubble
**Расположение:** `app/chat/components/MessageBubble.tsx`

Отдельное сообщение в чате.

**Props:**
- `message` - объект сообщения
- `isLastMessage` - последнее ли это сообщение
- `onRetry` - повторная отправка
- `autoPlayVoice` - автовоспроизведение
- `isLoading` - состояние загрузки

**Функции:**
- Отображение сообщения пользователя или AI
- Рендеринг markdown для ответов AI
- Кнопка остановки голосового воспроизведения
- Кнопка повторной отправки при ошибке

### ChatInput
**Расположение:** `app/chat/components/ChatInput.tsx`

Поле ввода с кнопками управления.

**Props:**
- `input` - значение поля ввода
- `setInput` - установка значения
- `onSubmit` - отправка сообщения
- `loading` - состояние загрузки
- `onCancel` - отмена запроса

**Функции:**
- Текстовый ввод
- Кнопка отправки
- Кнопка отмены
- Интеграция с голосовым вводом

### ChatSettingsPanel
**Расположение:** `app/chat/components/ChatSettingsPanel.tsx`

Панель настроек чата.

**Props:**
- Все настройки из ChatHeader

**Функции:**
- Настройка режима ответа
- Выбор модели AI
- Настройка Chain of Thought
- Переключение автовоспроизведения голоса

### PromptTemplates
**Расположение:** `app/chat/components/PromptTemplates.tsx`

Управление шаблонами промптов.

**Функции:**
- Отображение списка шаблонов
- Создание нового шаблона
- Редактирование шаблона
- Удаление шаблона
- Использование шаблона

## Общие компоненты

### LanguageSwitcher
**Расположение:** `app/components/LanguageSwitcher.tsx`

Переключатель языка интерфейса.

**Функции:**
- Переключение между русским и английским
- Сохранение выбора в контексте

## Компоненты страниц

### Errors Page
**Расположение:** `app/errors/page.tsx`

Страница просмотра ошибок.

**Компоненты:**
- `ErrorsHeader` - шапка страницы
- `ErrorsList` - список ошибок
- `ErrorCard` - карточка ошибки
- `ErrorsStats` - статистика ошибок
- `EmptyState` - пустое состояние
- `LoadingState` - состояние загрузки

### Metrics Page
**Расположение:** `app/metrics/page.tsx`

Страница метрик использования.

**Компоненты:**
- Графики использования токенов
- Статистика запросов
- Стоимость использования
- Время ответа
